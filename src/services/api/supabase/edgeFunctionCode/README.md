
# AI Proxy Edge Function

Этот модуль содержит код и документацию для Edge Function `ai-proxy`, которая служит для безопасного проксирования запросов к различным AI API.

## Структура файлов

- `index.ts` - Основной файл Edge Function, содержащий руководство и код для копирования в консоль Supabase
- `config.ts` - Конфигурационные константы и настройки
- `handlers/openai.ts` - Обработчик запросов к OpenAI API
- `handlers/abacus.ts` - Обработчик запросов к Abacus AI API

## Инструкция по установке

1. В панели управления Supabase перейдите в раздел "Edge Functions"
2. Создайте новую функцию с названием "ai-proxy"
3. Скопируйте код из комментария в файле `index.ts` в редактор функции
4. Добавьте необходимые секреты в разделе "Секреты":
   - `OPENAI_API_KEY` - Ключ API для доступа к OpenAI
   - `ABACUS_API_KEY` - Ключ API для доступа к Abacus.ai
5. Разверните функцию

## Использование

Для вызова функции необходимо отправить POST-запрос с следующими параметрами:

### Для OpenAI:

```json
{
  "provider": "openai",
  "prompt": "Ваш запрос",
  "options": {
    "model": "gpt-4o",
    "temperature": 0.2,
    "max_tokens": 500,
    "responseFormat": "json_object" // или "text"
  }
}
```

### Для Abacus:

```json
{
  "provider": "abacus",
  "endpoint": "путь_к_api",
  "method": "POST", // или "GET"
  "requestData": {
    // параметры запроса
  }
}
```

## Безопасность

- Функция использует секреты из переменных окружения для доступа к API
- Все запросы и ответы логируются для отладки
- Обрабатываются ошибки и возвращаются информативные сообщения
